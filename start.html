<!DOCTYPE html>
<html lang="en">
<head>
  <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
  <title>
    JsonWax for Qt
  </title>
  <link href='css/style.css' rel='stylesheet'>
</head>
<body>
<h1>
  JsonWax for Qt
</h1>
<h2>
  NOW WITH SERIALIZATION
</h2>
<div id='blackspace'></div>
<svg height='7.5em' id='SVG' viewBox='20 20 50 50' width='100%'>
  <text fill='red' id='jsonwaxtext' transform='translate(420, -57) rotate(45) scale(1.2)'>
    <tspan dy='1em' x='-1.1em'>
      ------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-2.1em'>
      ---
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-3.1em'>
      ------------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-4.1em'>
      ----
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-5.1em'>
      -------------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-6.1em'>
      ----------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-7.1em'>
      -----------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-8.1em'>
      --------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-9.1em'>
      ------------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-10.1em'>
      -------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-11.1em'>
      
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-12.1em'>
      ---------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-13.1em'>
      -----------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-14.1em'>
      --
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-15.1em'>
      --------------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-16.1em'>
      ----------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-17.1em'>
      --------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-18.1em'>
      ----
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-19.1em'>
      ---------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-20.1em'>
      ----
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-21.1em'>
      --
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-22.1em'>
      ----------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-23.1em'>
      ---------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-24.1em'>
      -------------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-25.1em'>
      -
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-26.1em'>
      ----------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-27.1em'>
      -----------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-28.1em'>
      ------------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-29.1em'>
      ----------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-30.1em'>
      --------------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-31.1em'>
      -------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-32.1em'>
      
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-33.1em'>
      --------
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-34.1em'>
      -----
      JsonWax JsonWax JsonWax
    </tspan>
    <tspan dy='1em' x='-35.1em'>
      
      JsonWax JsonWax JsonWax
    </tspan>
  </text>
</svg>
<div id='menucontainer'>
  <div id='menu'>
    <div class='MENU_ELEMENT' id='menu_element0'>
      <a href='index.html'>
        WHAT IS IT?
      </a>
    </div>
    <div class='MENU_ELEMENT' id='menu_element1'>
      <a href='start.html'>
        GETTING STARTED
      </a>
    </div>
    <div class='MENU_ELEMENT' id='menu_element2'>
      <a href='examples.html'>
        EXAMPLES
      </a>
    </div>
    <div class='MENU_ELEMENT' id='menu_element3'>
      <a href='func.html'>
        FUNCTIONALITY
      </a>
    </div>
    <div class='MENU_ELEMENT' id='menu_element4'>
      <a href='behav.html'>
        BEHAVIOR
      </a>
    </div>
  </div>
</div>
<div id='content'>
<nav>
  <i>
    functions:<br>
  </i>
  <a href='func.html#append'>
    append
  </a>
  <a href='func.html#copy'>
    copy
  </a>
  <a href='func.html#deserializeBytes'>
    deserializeBytes
  </a>
  <a href='func.html#deserializeJson'>
    deserializeJson
  </a>
  <a href='func.html#errorCode'>
    errorCode
  </a>
  <a href='func.html#errorMsg'>
    errorMsg
  </a>
  <a href='func.html#errorPos'>
    errorPos
  </a>
  <a href='func.html#exists'>
    exists
  </a>
  <a href='func.html#fromByteArray'>
    fromByteArray
  </a>
  <a href='func.html#isArray'>
    isArray
  </a>
  <a href='func.html#isNullValue'>
    isNullValue
  </a>
  <a href='func.html#isObject'>
    isObject
  </a>
  <a href='func.html#isValue'>
    isValue
  </a>
  <a href='func.html#keys'>
    keys
  </a>
  <a href='func.html#loadFile'>
    loadFile
  </a>
  <a href='func.html#move'>
    move
  </a>
  <a href='func.html#popFirst'>
    popFirst
  </a>
  <a href='func.html#popLast'>
    popLast
  </a>
  <a href='func.html#prepend'>
    prepend
  </a>
  <a href='func.html#remove'>
    remove
  </a>
  <a href='func.html#save'>
    save
  </a>
  <a href='func.html#saveAs'>
    saveAs
  </a>
  <a href='func.html#serializeToBytes'>
    serializeToBytes
  </a>
  <a href='func.html#serializeToJson'>
    serializeToJson
  </a>
  <a href='func.html#setEmptyArray'>
    setEmptyArray
  </a>
  <a href='func.html#setEmptyObject'>
    setEmptyObject
  </a>
  <a href='func.html#setNull'>
    setNull
  </a>
  <a href='func.html#setValue'>
    setValue
  </a>
  <a href='func.html#size'>
    size
  </a>
  <a href='func.html#toString'>
    toString
  </a>
  <a href='func.html#type'>
    type
  </a>
  <a href='func.html#value'>
    value
  </a>
</nav>
<div id='articles'>
<article class='wide'>
  <h3>
    GETTING STARTED
  </h3>
  <p>
    Download the newest version from the GitHub repository.<br><br>
  </p>
  <a href='https://github.com/doublejim/JsonWax/'>
    Github Repository
  </a>
  <p>
    <br>You'll need 4 files:<br> JsonWax.h, JsonWaxEditor.h, JsonWaxParser.h & JsonWaxSerializer.h<br>
    Put all 4 files in your Qt-project folder. You'll only need to:
  </p>
  <div class='code'>
    <div class='source'>
      #include "JsonWax.h"<br>
    </div>
  </div>
  <p>
    in your project to use JsonWax.<br><br>
    If you haven't enabled C++11 support in your project, you'll need to include this text in your .pro file:
  </p>
  <div class='code'>
    <div class='source'>
      CONFIG += c++11
    </div>
  </div>
</article>
<article class='wide'>
  <h3>
    HOW TO READ VALUES
  </h3>
  <p>
    Let's start out by creating a new JsonWax object, and save it to a file, which we shall call "test.json":
  </p>
  <div class='code'>
    <div class='source'>
      JsonWax json;<br>
      json.saveAs("test.json");
    </div>
  </div>
  <p>
    The file "test.json" now contains:
  </p>
  <div class='code'>
    <div class='json'>
      {<br>
      <br>
      }
    </div>
  </div>
  <p>
    because the JsonWax-object was empty.<br><br>
    What if you have a JSON-document (called "input.json"), and would like to load it?
    Your JSON-document looks like this:
  </p>
  <div class='code'>
    <div class='json'>
      {<br>
      &nbsp;&nbsp;"component1": "value1",<br>
      &nbsp;&nbsp;"component2": {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;"detail1": "value2"<br>
      &nbsp;&nbsp;}<br>
      }
    </div>
  </div>
  <p>
    You write:
  </p>
  <div class='code'>
    <div class='source'>
      JsonWax json;<br>
      if (json.loadFile("input.json"))<br>
      {<br>
      &nbsp;&nbsp;qDebug() &lt;&lt; json.value({"component1"}).toString();<br>
      } else {<br>
      &nbsp;&nbsp;qDebug() &lt;&lt; "The document wasn't found.";<br>
      }
    </div>
  </div>
  <p>
    This prints out:
  </p>
  <div class='code'>
    <div class='json'>
      "value1"
    </div>
  </div>
  <p>
    since you asked for the value of "component1", and converted it to a string.<br><br>
    But what if you wanted the value of "detail1" inside of "component2"?
    You write:
  </p>
  <div class='code'>
    <div class='source'>
      JsonWax json;<br>
      if (json.loadFile("input.json"))<br>
      {<br>
      &nbsp;&nbsp;qDebug() &lt;&lt; json.value({"component2","detail1"}).toString();<br>
      } else {<br>
      &nbsp;&nbsp;qDebug() &lt;&lt; "The document wasn't found.";<br>
      }
    </div>
  </div>
  <p>
    Which prints out:
  </p>
  <div class='code'>
    <div class='json'>
      "value2"
    </div>
  </div>
  <p>
    If you check what arguments <em>.value(...)</em> requires, it says:
  </p>
  <div class='code'>
    <div class='source'>
      value(const QVariantList& keys, const QVariant& defaultValue = QVariant())
    </div>
  </div>
  <p>
    The arguments you gave in the two previous examples were: <em>{"component1"}</em> and <em>{"component2","detail1"}</em>. These were accepted as QVariantLists. So, whenever
    you see a function with the argument <em>QVariantList keys</em>, it expects a list like this.<br><br>
    But, as you might have noticed, you can have a second argument when using that function.
    That's a default value for, if the location didn't exist, as a value, in the document.
    For example, if you wrote:
  </p>
  <div class='code'>
    <div class='source'>
      JsonWax json;<br>
      if (json.loadFile("input.json"))<br>
      {<br>
      &nbsp;&nbsp;qDebug() &lt;&lt; json.value({"component3"}, "not there").toString();<br>
      } else {<br>
      &nbsp;&nbsp;qDebug() &lt;&lt; "The document wasn't found.";<br>
      }
    </div>
  </div>
  <p>
    it would print out:
  </p>
  <div class='code'>
    <div class='json'>
      "not there"
    </div>
  </div>
  <p>
    because there is no such value as <em>component3</em>. The same thing goes for:
  </p>
  <div class='code'>
    <div class='source'>
      json.value({"component2"}, "not there").toString();
    </div>
  </div>
  <p>
    because the location wasn't a Value - it contained another Object.<br><br>
    But you can also have arrays in JSON-documents (square bracket notation).<br>How would you retrieve an array element
    with a list of keys like this?<br><br>This is your document:
  </p>
  <div class='code'>
    <div class='json'>
      [<br>
      &nbsp;&nbsp;"value1",<br>
      &nbsp;&nbsp;"value2",<br>
      &nbsp;&nbsp;[<br>
      &nbsp;&nbsp;&nbsp;&nbsp;"value3"<br>
      &nbsp;&nbsp;]<br>
      ]
    </div>
  </div>
  <p>
    We want to retrieve the first value. It's done like this:
  </p>
  <div class='code'>
    <div class='source'>
      JsonWax json;<br>
      if (json.loadFile("input.json"))<br>
      {<br>
      &nbsp;&nbsp;qDebug() &lt;&lt; json.value({0}).toString();<br>
      } else {<br>
      &nbsp;&nbsp;qDebug() &lt;&lt; "The document wasn't found.";<br>
      }
    </div>
  </div>
  <p>
    This prints out:
  </p>
  <div class='code'>
    <div class='json'>
      "value1"
    </div>
  </div>
  <p>
    because you asked for the first element in the array (0 is first, 1 is second, etc.).<br><br>
    You may have guessed the next step... retrieving "value3" from the document.
  </p>
  <div class='code'>
    <div class='source'>
      JsonWax json;<br>
      if (json.loadFile("input.json"))<br>
      {<br>
      &nbsp;&nbsp;qDebug() &lt;&lt; json.value({2, 0}).toString();<br>
      } else {<br>
      &nbsp;&nbsp;qDebug() &lt;&lt; "The document wasn't found.";<br>
      }
    </div>
  </div>
  <p>
    It outputs:
  </p>
  <div class='code'>
    <div class='json'>
      "value3"
    </div>
  </div>
  <p>
    because you asked for the 3rd element in the root array (number 2), and then asked for
    the 1st element in that array (number 0).<br>
    But, what if you had both? Objects inside an Array? And the Values weren't
    strings, but integers?
  </p>
  <div class='code'>
    <div class='json'>
      [<br>
      &nbsp;&nbsp;{<br>
      &nbsp;&nbsp;&nbsp;&nbsp;"component": 15648<br>
      &nbsp;&nbsp;},<br>
      &nbsp;&nbsp;{<br>
      &nbsp;&nbsp;&nbsp;&nbsp;"component": 77<br>
      &nbsp;&nbsp;}<br>
      ]
    </div>
  </div>
  <p>
    You mix the numbers and strings. First, a number specifying the position in the array,
    then the name of the object, as a string.
  </p>
  <div class='code'>
    <div class='source'>
      JsonWax json;<br>
      if (json.loadFile("input.json"))<br>
      {<br>
      &nbsp;&nbsp;qDebug() &lt;&lt; json.value({0, "component"}).toInt();<br>
      } else {<br>
      &nbsp;&nbsp;qDebug() &lt;&lt; "The document wasn't found.";<br>
      }
    </div>
  </div>
  <p>
    And you get this:
  </p>
  <div class='code'>
    <div class='json'>
      15648
    </div>
  </div>
  <p>
    <br>Those were the basics of reading values from JSON-data.<br><br>
    As a final note, I need to tell you the meaning of an empty keys-list: <em>{}</em>.<br>
    It refers to the <em>root</em> Array or Object, which is the top-level element,
    that exists in every valid JSON-document. Since the JSON document format doesn't allow
    that to be a value, writing <em>.value({})</em> will always return the defaultValue.<br>
    However, you can use this whenever a function works on Arrays or Objects, fx.
    when using the <em>.move</em> or <em>.keys</em> functions.<br>
  </p>
</article>
<article class='wide'>
  <h3>
    HOW TO SET VALUES
  </h3>
  <p>
    You've learned how to read values, but what if you wanted to create your own documents,
    or edit existing ones?<br>
    The function you need is <em>setValue()</em>. Our goal is to create this:
  </p>
  <div class='code'>
    <div class='json'>
      {<br>
      &nbsp;&nbsp;"mask1": "value1",<br>
      &nbsp;&nbsp;"mask2": 15000,<br>
      &nbsp;&nbsp;"mask3": {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;"part1": "value2",<br>
      &nbsp;&nbsp;&nbsp;&nbsp;"part2": [<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"value3",<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"value4"<br>
      &nbsp;&nbsp;&nbsp;&nbsp;]<br>
      &nbsp;&nbsp;}<br>
      }
    </div>
  </div>
  <p>
    This can be created with just a few lines of code. Let's start with <em>mask1</em> and
    <em>mask2</em>.
  </p>
  <div class='code'>
    <div class='source'>
      JsonWax json;<br>
      json.setValue({"mask1"}, "value1");<br>
      json.setValue({"mask2"}, 15000);
    </div>
  </div>
  <p>
    See, if it were a string, we used quotes, and if it were a number, we didn't.<br>
    Now, <em>"value2"</em> is an Object within an Object. We refer to this element the same
    way as when reading a value, with a list of keys:
  </p>
  <div class='code'>
    <div class='source'>
      json.setValue({"mask3","part1"}, "value2");
    </div>
  </div>
  <p>
    And the last part are two values within an Array. So, we end the list with a number:
  </p>
  <div class='code'>
    <div class='source'>
      json.setValue({"mask3","part2", 0}, "value3");<br>
      json.setValue({"mask3","part2", 1}, "value4");
    </div>
  </div>
  <p>
    Finally, we want to save this to a file. We write:
  </p>
  <div class='code'>
    <div class='source'>
      json.saveAs("result.json");
    </div>
  </div>
  <p>
    <br>And that's it! We've successfully created a JSON-document, and saved it to a file.<br>
    You should notice that <em>setValue</em> always, automatically, overwrites any existing values,
    or changes the document, so that your setValue-request may be fulfilled.<br><br>
    Okay, but what would happen if the Array element number were a negative one, or not just increasing
    the Array size by one?<br>
    If we added one more line to the previous code:
  </p>
  <div class='code'>
    <div class='source'>
      json.setValue({"mask3","part2", 5}, "value5");
    </div>
  </div>
  <p>
    We would get this document:
  </p>
  <div class='code'>
    <div class='json'>
      {<br>
      &nbsp;&nbsp;"mask1": "value1",<br>
      &nbsp;&nbsp;"mask2": 15000,<br>
      &nbsp;&nbsp;"mask3": {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;"part1": "value2",<br>
      &nbsp;&nbsp;&nbsp;&nbsp;"part2": [<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"value3",<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"value4",<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;null,<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;null,<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;null,<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"value5"<br>
      &nbsp;&nbsp;&nbsp;&nbsp;]<br>
      &nbsp;&nbsp;}<br>
      }
    </div>
  </div>
  <p>
    So, it just inserts <em>null</em> values in place of the non-existing Array elements.<br><br>
    And using a negative array element value, like this:
  </p>
  <div class='code'>
    <div class='source'>
      json.setValue({"mask3","part2", -1}, "value5");
    </div>
  </div>
  <p>
    attempts to fulfill your request as far as possible: it creates "mask3", "part2", and it turns the
    location into an Array. But it can't save the value.<br>So you'll receive the error message:
  </p>
  <div class='code'>
    <div class='json'>
      JsonWax-insert error: invalid key.
    </div>
  </div>
  <p>
    <br><br>
  </p>
  <a href='func.html'>
    See all available functions here.
  </a>
  <p>
    <br>
  </p>
</article>
</div></div>
<footer></footer>
</body></html>
